## MongoDB 命令

[toc]

RDBMS和mongodb的对应术语
|RDBMS|MongoDB|
|---|---|
|数据库|数据库|
|表|集合|
|行|文档|
|列|字段|
|表联合|嵌入文档|
|主键|主键|

### 1.显示所有的数据库

**管理员可用**

只要是管理员，在哪一个数据库下操作都无所谓

	show dbs
	
### 2.显示当前的数据库

	db
	
### 3.切换数据库或创建数据库

如果数据库不存在则创建数据库，存在则直接切换

	use admin ##admin 为指定的数据库名
	
### 4.  删除当前数据库
	
	db.dropDatabase()
	
### 5. 数据库中插入文档
	
db.test.insert(
```json
	{
		name:"test3",
		age:12,
		sex:false
	}
```
)

如果当前字段不存在， 数据库会自动创建。如果当前字段已经没有值了，则不会显示


### 6. 查询已经存在的数据

查询指定条件的文档

	db.test.find({name:"test3"})
	
查询所有文档

	db.test.find()
	
格式化显示查询的所有文档
	
	db.test.find().pretty()
	
**插入文档你也可以使用 db.col.save(document) 命令。如果不指定 _id 字段 save() 方法类似于 insert() 方法。如果指定 _id 字段，则会更新该 _id 的数据。**

### 7.更新文档
{name:"test4"} 相当于 RDBMS中的where name='test4' 

{$set:{name:"test4_modify"}} 相当于RDBMS中的set name='test4_modify'

	db.test.update({name:"test4"},{$set:{name:"test4_modify"}})
	
### 7.1其他更新文档操作

只更新第一条记录：

	db.col.update( { "count" : { $gt : 1 } } , { $set : { "test2" : "OK"} } );

全部更新：

	db.col.update( { "count" : { $gt : 3 } } , { $set : { "test2" : "OK"} },false,true );

只添加第一条：

	db.col.update( { "count" : { $gt : 4 } } , { $set : { "test5" : "OK"} },true,false );

全部添加加进去:

	db.col.update( { "count" : { $gt : 5 } } , { $set : { "test5" : "OK"} },true,true );

全部更新：

	db.col.update( { "count" : { $gt : 15 } } , { $inc : { "count" : 1} },false,true );

只更新第一条记录：

	db.col.update( { "count" : { $gt : 10 } } , { $inc : { "count" : 1} },false,false );

